<div class="container mt-5">
  <div class="row text-center justify-content-center">
    <img class="mediumPageLogo" src="../../../assets/NextRep.png" />
    <h1 class="mt-5">Register to start tracking</h1>
  </div>

  <div class="row justify-content-center">
    <div class=" col-md-3"></div>
    <mat-stepper
      orientation="vertical"
      linear
      #stepper
      class="col-sm-12 col-md-6"
    >
      <mat-step [stepControl]="userDetailsFormGroup" [editable]="true">
        <form [formGroup]="userDetailsFormGroup">
          <ng-template matStepLabel>Fill out your details</ng-template>
          <div class="form-group mb-3">
            <label for="nome">Name</label>
            <input
              type="text"
              class="form-control"
              id="nome"
              placeholder="Name"
              formControlName="nome"
              [ngClass]="{
                'is-invalid': fc['nome'].touched && fc['nome'].invalid
              }"
            />
            <div *ngIf="fc['nome'].errors?.['required']">
              <div
                class="text-danger"
                *ngIf="fc['nome'].touched && fc['nome'].invalid"
              >
                Enter your name
              </div>
            </div>
          </div>
          <div class="form-group mb-3">
            <label for="apelido">Last Name</label>
            <input
              type="text"
              class="form-control"
              id="apelido"
              placeholder="Last Name"
              formControlName="apelido"
              [ngClass]="{
                'is-invalid': fc['apelido'].touched && fc['apelido'].invalid
              }"
            />
            <div *ngIf="fc['apelido'].errors?.['required']">
              <div
                class="text-danger"
                *ngIf="fc['apelido'].touched && fc['apelido'].invalid"
              >
                Enter your last name
              </div>
            </div>
          </div>
          <div class="form-group mb-3">
            <label for="dataNascimento">Birth Date</label>
            <input
              min="1"
              type="date"
              class="form-control"
              id="dataNascimento"
              formControlName="dataNascimento"
              [ngClass]="{
                'is-invalid': fc['dataNascimento'].touched && fc['dataNascimento'].invalid
              }"
              required
            />
            <div
              class="text-danger"
              *ngIf="fc['dataNascimento'].touched && fc['dataNascimento'].invalid"
            >
              <div *ngIf="fc['dataNascimento'].errors?.['required']">Enter your birth date</div>
              <div *ngIf="fc['dataNascimento'].errors?.['invalidDate']">
                {{ fc['dataNascimento'].errors?.['invalidDate'] }}
              </div>
              <div *ngIf="fc['dataNascimento'].errors?.['futureDate']">
                {{ fc['dataNascimento'].errors?.['futureDate'] }}
              </div>
              <div *ngIf="fc['dataNascimento'].errors?.['maxAgeExceeded']">
                {{ fc['dataNascimento'].errors?.['maxAgeExceeded'] }}
              </div>
            </div>
          </div>
          <div class="form-group mb-3">
            <label for="sexo">Gender</label>
            <select
              id="sexo"
              class="form-control"
              formControlName="sexo"
              [ngClass]="{
                'is-invalid': fc['sexo'].touched && fc['sexo'].invalid
              }"
              required
            >
              <option value="">Select...</option>
              <option value="Masculine">Masculine</option>
              <option value="Feminine">Feminine</option>
              <option value="Other">Other</option>
            </select>
            <div
              class="text-danger"
              *ngIf="fc['sexo'].touched && fc['sexo'].invalid"
            >
              <div *ngIf="fc['sexo'].errors?.['required']">
                Select your gender
              </div>
            </div>
          </div>
          <div class="form-group mb-3">
            <label for="atividade">Activity level</label>
            <select
              id="atividade"
              class="form-control"
              formControlName="atividade"
              [ngClass]="{
                'is-invalid': fc['atividade'].touched && fc['atividade'].invalid
              }"
              required
            >
              <option value="">Selecione...</option>
              <option value="Sedentary (little or no exercise)">
                Sedentary (little or no exercise)
              </option>
              <option value="Lightly active (1-3 days/week)">
                Lightly active (1-3 days/week)
              </option>
              <option value="Moderately active (3-5 days/week)">
                Moderately active (3-5 days/week)
              </option>
              <option value="Vigorously active (6-7 days/week)">
                Vigorously active (6-7 days/week)
              </option>
              <option value="Extremely active (everyday/physical job)">
                Extremely active (everyday/physical job)
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="fc['atividade'].touched && fc['atividade'].invalid"
            >
              <div *ngIf="fc['atividade'].errors?.['required']">
                Select your activity level
              </div>
            </div>
          </div>
          <div>
            <button mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="bodyMetricsFormGroup" [editable]="true">
        <form [formGroup]="bodyMetricsFormGroup">
          <ng-template matStepLabel>Fill out your physical stats</ng-template>
          <div class="form-group mb-3">
            <label for="peso">Weight (kg)</label>
            <input
              min="0"
              type="number"
              class="form-control"
              id="peso"
              placeholder="Weight (kg)"
              formControlName="peso"
              [ngClass]="{
                'is-invalid': fc2['peso'].touched && fc2['peso'].invalid
              }"
              required
            />
            <div
              class="text-danger"
              *ngIf="fc2['peso'].touched && fc2['peso'].invalid"
            >
              <div *ngIf="fc2['peso'].errors?.['required']">
                Enter your weight
              </div>
            </div>
          </div>
          <div class="form-group mb-3">
            <label for="objetivo">Goal (kg)</label>
            <input
              min="0"
              type="number"
              class="form-control"
              id="objetivo"
              placeholder="Goal (kg)"
              formControlName="objetivo"
              [ngClass]="{
                'is-invalid': fc2['objetivo'].touched && fc2['objetivo'].invalid
              }"
              required
            />
            <div
              class="text-danger"
              *ngIf="fc2['objetivo'].touched && fc2['objetivo'].invalid"
            >
              <div *ngIf="fc2['objetivo'].errors?.['required']">
                Enter your goal
              </div>
            </div>
          </div>
          <div class="form-group mb-3">
            <label for="altura">Height (cm)</label>
            <input
              min="0"
              type="number"
              class="form-control"
              id="altura"
              placeholder="Height (cm)"
              formControlName="altura"
              [ngClass]="{
                'is-invalid': fc2['altura'].touched && fc2['altura'].invalid
              }"
              required
            />
            <div
              class="text-danger"
              *ngIf="fc2['altura'].touched && fc2['altura'].invalid"
            >
              <div *ngIf="fc2['peso'].errors?.['required']">
                Enter your height
              </div>
            </div>
          </div>
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="measurementsFormGroup" [editable]="true">
        <form [formGroup]="measurementsFormGroup">
          <ng-template matStepLabel
            >Fill out your body measurements (optional)</ng-template
          >
          <p class="text-info">Don't have your body measurements ready? Don't worry they can be inserted in the future.</p>
          <div class="form-group mb-3">
            <label for="torax">Torax (cm)</label>
            <input
              min="0"
              type="number"
              class="form-control"
              id="torax"
              placeholder="Torax (cm)"
              formControlName="torax"
              [ngClass]="{
                'is-invalid': fc3['torax'].touched && fc3['torax'].invalid
              }"
            />
          </div>
          <div class="form-group mb-3">
            <label for="cintura">Waist (cm)</label>
            <input
              min="0"
              type="number"
              class="form-control"
              id="cintura"
              placeholder="Waist (cm)"
              formControlName="cintura"
              [ngClass]="{
                'is-invalid': fc3['cintura'].touched && fc3['cintura'].invalid
              }"
            />
          </div>
          <div class="form-group mb-3">
            <label for="quadril">Hips (cm)</label>
            <input
              min="0"
              type="number"
              class="form-control"
              id="quadril"
              placeholder="Hips (cm)"
              formControlName="quadril"
              [ngClass]="{
                'is-invalid': fc3['quadril'].touched && fc3['quadril'].invalid
              }"
            />
          </div>
          <div class="form-group mb-3">
            <label for="braco">Arm (cm)</label>
            <input
              min="0"
              type="number"
              class="form-control"
              id="braco"
              placeholder="Arm (cm)"
              formControlName="braco"
              [ngClass]="{
                'is-invalid': fc3['braco'].touched && fc3['braco'].invalid
              }"
            />
          </div>
          <div class="form-group mb-3">
            <label for="coxa">Leg (cm)</label>
            <input
              min="0"
              type="number"
              class="form-control"
              id="coxa"
              placeholder="Leg (cm)"
              formControlName="coxa"
              [ngClass]="{
                'is-invalid': fc3['coxa'].touched && fc3['coxa'].invalid
              }"
            />
          </div>
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="macrosFormGroup" [editable]="true">
        <form [formGroup]="macrosFormGroup">
          <ng-template matStepLabel
            >Fill out your macronutrients distribution + daily water
            consumption</ng-template
          >

          <div class="form-group mb-3">
            <label for="proteinas">Proteins %</label>
            <input
              step="1"
              min="0"
              pattern="^[0-9]*$"
              (keypress)="allowOnlyInteger($event)"
              type="number"
              class="form-control"
              id="proteinas"
              placeholder="Proteins %"
              formControlName="proteinas"
              [ngClass]="{
                'is-invalid':
                  fc4['proteinas'].touched && fc4['proteinas'].invalid
              }"
              required
            />
            <div
              class="text-danger"
              *ngIf="fc4['proteinas'].touched && fc4['proteinas'].invalid"
            >
              <div *ngIf="fc4['proteinas'].errors?.['required']">
                Enter your proteins percentage
              </div>
            </div>
          </div>
          <div class="form-group mb-3">
            <label for="gorduras">Fats %</label>
            <input
              step="1"
              min="0"
              pattern="^[0-9]*$"
              (keypress)="allowOnlyInteger($event)"
              type="number"
              class="form-control"
              id="gorduras"
              placeholder="Fats %"
              formControlName="gorduras"
              [ngClass]="{
                'is-invalid': fc4['gorduras'].touched && fc4['gorduras'].invalid
              }"
              required
            />
            <div
              class="text-danger"
              *ngIf="fc4['gorduras'].touched && fc4['gorduras'].invalid"
            >
              <div *ngIf="fc4['gorduras'].errors?.['required']">
                Enter your fats percentage
              </div>
            </div>
          </div>
          <div class="form-group mb-3">
            <label for="gorduras">Carbohydrates %</label>
            <input
              step="1"
              min="0"
              pattern="^[0-9]*$"
              (keypress)="allowOnlyInteger($event)"
              type="number"
              class="form-control"
              id="hidratos"
              placeholder="Carbohydrates %"
              formControlName="hidratos"
              [ngClass]="{
                'is-invalid': fc4['hidratos'].touched && fc4['hidratos'].invalid
              }"
              required
            />
            <div
              class="text-danger"
              *ngIf="fc4['hidratos'].touched && fc4['hidratos'].invalid"
            >
              <div *ngIf="fc4['hidratos'].errors?.['required']">
                Enter your carbohydrates percentage
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div *ngIf="!checkMacroNutrientPercentage()" class="text-danger">
              The sum of the percentages must be 100%
            </div>
          </div>
          <div class="form-group col-12">
            <label for="agua">Water (L)</label>
            <input
              min="0"
              type="number"
              class="form-control"
              id="agua"
              placeholder="Water (L)"
              formControlName="litrosAgua"
              [ngClass]="{
                'is-invalid':
                  fc4['litrosAgua'].touched && fc4['litrosAgua'].invalid
              }"
              required
            />
            <div
              class="text-danger"
              *ngIf="fc4['litrosAgua'].touched && fc4['litrosAgua'].invalid"
            >
              <div *ngIf="fc4['litrosAgua'].errors?.['required']">
                Enter your daily water consumption
              </div>
            </div>
          </div>
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button
              mat-button
              matStepperNext
              [disabled]="!checkMacroNutrientPercentage()"
            >
              Next
            </button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="registerFormGroup" [editable]="true">
        <form [formGroup]="registerFormGroup" (ngSubmit)="onSubmit()">
          <ng-template matStepLabel>Register</ng-template>
          <div class="form-group mb-3">
            <label for="email">Email</label>
            <input
              type="email"
              class="form-control"
              id="email"
              placeholder="Email"
              formControlName="email"
              [ngClass]="{
                'is-invalid': fc5['email'].touched && fc5['email'].invalid
              }"
            />
            <div
              class="text-danger"
              *ngIf="fc5['email'].touched && fc5['email'].invalid"
            >
              <div *ngIf="fc5['email'].errors?.['required']">
                Enter an email
              </div>
              <div *ngIf="fc5['email'].errors?.['email']">
                Enter a valid email
              </div>
            </div>
          </div>
          <div class="form-group mb-3">
            <label for="password">Password</label>
            <input
              type="password"
              class="form-control"
              id="password"
              placeholder="Password"
              formControlName="password"
              [ngClass]="{
                'is-invalid': fc5['password'].touched && fc5['password'].invalid
              }"
            />
            <div *ngIf="fc5['password'].errors?.['required']">
              <div
                class="text-danger"
                *ngIf="fc5['password'].touched && fc5['password'].invalid"
              >
                Enter a password
              </div>
            </div>
            <div
              *ngIf="fc5['password']?.errors?.['passwordStrength'] && fc5['password']?.touched"
              class="text-danger"
            >
              {{ fc5['password'].errors?.['passwordStrength'] }}
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-center">
            <button
              [disabled]="registerFormGroup.invalid"
              type="submit"
              class="btn btn-primary btn-primary-theme mt-3 w-100"
            >
              Register
            </button>
          </div>
          <div class="hr-with-text mt-3 mb-3">
            <span>or</span>
          </div>
          <div class="d-flex flex-column align-items-center w-100 mb-3">
            <button
              type="button"
              (click)="registerWithGoogle()"
              class="registerProviderBtn mb-3"
            >
              <fa-icon
                [ngStyle]="{ color: 'var(--primary-color)' }"
                class="me-3 socialIcon"
                [icon]="faGoogle"
              ></fa-icon
              >Register with Google
            </button>
            <!--button
              type="button"
              (click)="registerWithFacebook()"
              class="registerProviderBtn mb-3"
            >
              <fa-icon
                [ngStyle]="{ color: 'var(--primary-color)' }"
                class="me-3 socialIcon"
                [icon]="faFacebook"
              ></fa-icon
              >Register with Facebook
            </button-->
          </div>
        </form>
        <button mat-button matStepperPrevious>Back</button>
      </mat-step>
    </mat-stepper>
    <div class="col-md-3 "></div>
    <hr class="col-10 col-md-6 " />
    <div class="text-center">
      <p class="mt-3">
        Already have an account? <a routerLink="/login">Sign in here</a>
      </p>
    </div>
  </div>
</div>
